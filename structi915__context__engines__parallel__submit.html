<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NEO: i915_context_engines_parallel_submit Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">NEO
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="structi915__context__engines__parallel__submit-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">i915_context_engines_parallel_submit Struct Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="prelim_2drm_2i915__drm_8h_source.html">i915_drm.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for i915_context_engines_parallel_submit:</div>
<div class="dyncontent">
<div class="center"><img src="structi915__context__engines__parallel__submit__coll__graph.png" border="0" usemap="#ai915__context__engines__parallel__submit_coll__map" alt="Collaboration graph"/></div>
<map name="ai915__context__engines__parallel__submit_coll__map" id="ai915__context__engines__parallel__submit_coll__map">
<area shape="rect" title=" " alt="" coords="95,219,242,384"/>
<area shape="rect" href="structi915__user__extension.html" title=" " alt="" coords="5,5,145,156"/>
<area shape="rect" href="structi915__engine__class__instance.html" title=" " alt="" coords="169,35,355,127"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a8328ac28f43497cb1e1778fcaf3fc243"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structi915__user__extension.html">i915_user_extension</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structi915__context__engines__parallel__submit.html#a8328ac28f43497cb1e1778fcaf3fc243">base</a></td></tr>
<tr class="separator:a8328ac28f43497cb1e1778fcaf3fc243"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5963b8d18d7552382d0b433887af769f"><td class="memItemLeft" align="right" valign="top">__u16&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structi915__context__engines__parallel__submit.html#a5963b8d18d7552382d0b433887af769f">engine_index</a></td></tr>
<tr class="separator:a5963b8d18d7552382d0b433887af769f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0140823bb68e86ca1b0106274ca6f5a8"><td class="memItemLeft" align="right" valign="top">__u16&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structi915__context__engines__parallel__submit.html#a0140823bb68e86ca1b0106274ca6f5a8">width</a></td></tr>
<tr class="separator:a0140823bb68e86ca1b0106274ca6f5a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0549a7337dac60b7a904823affea0af"><td class="memItemLeft" align="right" valign="top">__u16&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structi915__context__engines__parallel__submit.html#aa0549a7337dac60b7a904823affea0af">num_siblings</a></td></tr>
<tr class="separator:aa0549a7337dac60b7a904823affea0af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bf77ee872d7f725c8f492918355d07a"><td class="memItemLeft" align="right" valign="top">__u16&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structi915__context__engines__parallel__submit.html#a7bf77ee872d7f725c8f492918355d07a">mbz16</a></td></tr>
<tr class="separator:a7bf77ee872d7f725c8f492918355d07a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb3591007a65ac935bad0317640d351e"><td class="memItemLeft" align="right" valign="top">__u64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structi915__context__engines__parallel__submit.html#aeb3591007a65ac935bad0317640d351e">flags</a></td></tr>
<tr class="separator:aeb3591007a65ac935bad0317640d351e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd584d55eb7f2c59743750b903d50de9"><td class="memItemLeft" align="right" valign="top">__u64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structi915__context__engines__parallel__submit.html#acd584d55eb7f2c59743750b903d50de9">mbz64</a> [3]</td></tr>
<tr class="separator:acd584d55eb7f2c59743750b903d50de9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51994218af1a4cc4cbae727ad10d4a00"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structi915__engine__class__instance.html">i915_engine_class_instance</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structi915__context__engines__parallel__submit.html#a51994218af1a4cc4cbae727ad10d4a00">engines</a> [0]</td></tr>
<tr class="separator:a51994218af1a4cc4cbae727ad10d4a00"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >struct <a class="el" href="structi915__context__engines__parallel__submit.html">i915_context_engines_parallel_submit</a> - Configure engine for parallel submission.</p>
<p >Setup a slot in the context engine map to allow multiple BBs to be submitted in a single execbuf IOCTL. Those BBs will then be scheduled to run on the GPU in parallel. Multiple hardware contexts are created internally in the i915 to run these BBs. Once a slot is configured for N BBs only N BBs can be submitted in each execbuf IOCTL and this is implicit behavior e.g. The user doesn't tell the execbuf IOCTL there are N BBs, the execbuf IOCTL knows how many BBs there are based on the slot's configuration. The N BBs are the last N buffer objects or first N if I915_EXEC_BATCH_FIRST is set.</p>
<p >The default placement behavior is to create implicit bonds between each context if each context maps to more than 1 physical engine (e.g. context is a virtual engine). Also we only allow contexts of same engine class and these contexts must be in logically contiguous order. Examples of the placement behavior are described below. Lastly, the default is to not allow BBs to be preempted mid-batch. Rather insert coordinated preemption points on all hardware contexts between each set of BBs. Flags could be added in the future to change both of these default behaviors.</p>
<p >Returns -EINVAL if hardware context placement configuration is invalid or if the placement configuration isn't supported on the platform / submission interface. Returns -ENODEV if extension isn't supported on the platform / submission interface.</p>
<p >.. code-block:: none</p>
<p >Examples syntax: CS[X] = generic engine of same class, logical instance X INVALID = I915_ENGINE_CLASS_INVALID, I915_ENGINE_CLASS_INVALID_NONE</p>
<p >Example 1 pseudo code: set_engines(INVALID) set_parallel(engine_index=0, width=2, num_siblings=1, engines=CS[0],CS[1])</p>
<p >Results in the following valid placement: CS[0], CS[1]</p>
<p >Example 2 pseudo code: set_engines(INVALID) set_parallel(engine_index=0, width=2, num_siblings=2, engines=CS[0],CS[2],CS[1],CS[3])</p>
<p >Results in the following valid placements: CS[0], CS[1] CS[2], CS[3]</p>
<p >This can be thought of as two virtual engines, each containing two engines thereby making a 2D array. However, there are bonds tying the entries together and placing restrictions on how they can be scheduled. Specifically, the scheduler can choose only vertical columns from the 2D array. That is, CS[0] is bonded to CS[1] and CS[2] to CS[3]. So if the scheduler wants to submit to CS[0], it must also choose CS[1] and vice versa. Same for CS[2] requires also using CS[3]. VE[0] = CS[0], CS[2] VE[1] = CS[1], CS[3]</p>
<p >Example 3 pseudo code: set_engines(INVALID) set_parallel(engine_index=0, width=2, num_siblings=2, engines=CS[0],CS[1],CS[1],CS[3])</p>
<p >Results in the following valid and invalid placements: CS[0], CS[1] CS[1], CS[3] - Not logically contiguous, return -EINVAL </p>
</div><h2 class="groupheader">Member Data Documentation</h2>
<a id="a8328ac28f43497cb1e1778fcaf3fc243" name="a8328ac28f43497cb1e1778fcaf3fc243"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8328ac28f43497cb1e1778fcaf3fc243">&#9670;&nbsp;</a></span>base</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structi915__user__extension.html">i915_user_extension</a> i915_context_engines_parallel_submit::base</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >@base: base user extension. </p>

</div>
</div>
<a id="a5963b8d18d7552382d0b433887af769f" name="a5963b8d18d7552382d0b433887af769f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5963b8d18d7552382d0b433887af769f">&#9670;&nbsp;</a></span>engine_index</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__u16 i915_context_engines_parallel_submit::engine_index</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >@engine_index: slot for parallel engine </p>

</div>
</div>
<a id="a51994218af1a4cc4cbae727ad10d4a00" name="a51994218af1a4cc4cbae727ad10d4a00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51994218af1a4cc4cbae727ad10d4a00">&#9670;&nbsp;</a></span>engines</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structi915__engine__class__instance.html">i915_engine_class_instance</a> i915_context_engines_parallel_submit::engines[0]</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >@engines: 2-d array of engine instances to configure parallel engine</p>
<p >length = width (i) * num_siblings (j) index = j + i * num_siblings </p>

</div>
</div>
<a id="aeb3591007a65ac935bad0317640d351e" name="aeb3591007a65ac935bad0317640d351e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb3591007a65ac935bad0317640d351e">&#9670;&nbsp;</a></span>flags</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__u64 i915_context_engines_parallel_submit::flags</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >@flags: all undefined flags must be zero, currently not defined flags </p>

</div>
</div>
<a id="a7bf77ee872d7f725c8f492918355d07a" name="a7bf77ee872d7f725c8f492918355d07a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7bf77ee872d7f725c8f492918355d07a">&#9670;&nbsp;</a></span>mbz16</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__u16 i915_context_engines_parallel_submit::mbz16</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >@mbz16: reserved for future use; must be zero </p>

</div>
</div>
<a id="acd584d55eb7f2c59743750b903d50de9" name="acd584d55eb7f2c59743750b903d50de9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd584d55eb7f2c59743750b903d50de9">&#9670;&nbsp;</a></span>mbz64</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__u64 i915_context_engines_parallel_submit::mbz64[3]</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >@mbz64: reserved for future use; must be zero </p>

</div>
</div>
<a id="aa0549a7337dac60b7a904823affea0af" name="aa0549a7337dac60b7a904823affea0af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0549a7337dac60b7a904823affea0af">&#9670;&nbsp;</a></span>num_siblings</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__u16 i915_context_engines_parallel_submit::num_siblings</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >@num_siblings: number of siblings per context or in other words the number of possible placements for each submission </p>

</div>
</div>
<a id="a0140823bb68e86ca1b0106274ca6f5a8" name="a0140823bb68e86ca1b0106274ca6f5a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0140823bb68e86ca1b0106274ca6f5a8">&#9670;&nbsp;</a></span>width</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__u16 i915_context_engines_parallel_submit::width</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >@width: number of contexts per parallel engine or in other words the number of batches in each submission </p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>third_party/uapi/prelim/drm/<a class="el" href="prelim_2drm_2i915__drm_8h_source.html">i915_drm.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
