<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NEO: drm_i915_gem_caching Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">NEO
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="structdrm__i915__gem__caching-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">drm_i915_gem_caching Struct Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="drm_2i915__drm_8h_source.html">i915_drm.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for drm_i915_gem_caching:</div>
<div class="dyncontent">
<div class="center"><img src="structdrm__i915__gem__caching__coll__graph.png" border="0" usemap="#adrm__i915__gem__caching_coll__map" alt="Collaboration graph"/></div>
<map name="adrm__i915__gem__caching_coll__map" id="adrm__i915__gem__caching_coll__map">
<area shape="rect" title=" " alt="" coords="5,5,164,97"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a5a3868b36e69d84c1183ecb7bb91a7c6"><td class="memItemLeft" align="right" valign="top">__u32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdrm__i915__gem__caching.html#a5a3868b36e69d84c1183ecb7bb91a7c6">handle</a></td></tr>
<tr class="separator:a5a3868b36e69d84c1183ecb7bb91a7c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a339a30c01f374b40e09356067372ab"><td class="memItemLeft" align="right" valign="top">__u32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdrm__i915__gem__caching.html#a0a339a30c01f374b40e09356067372ab">caching</a></td></tr>
<tr class="separator:a0a339a30c01f374b40e09356067372ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >struct <a class="el" href="structdrm__i915__gem__caching.html">drm_i915_gem_caching</a> - Set or get the caching for given object handle.</p>
<p >Allow userspace to control the GTT caching bits for a given object when the object is later mapped through the ppGTT(or GGTT on older platforms lacking
ppGTT support, or if the object is used for scanout). Note that this might require unbinding the object from the GTT first, if its current caching value doesn't match.</p>
<p >Note that this all changes on discrete platforms, starting from DG1, the set/get caching is no longer supported, and is now rejected. Instead the CPU caching attributes(WB vs WC) will become an immutable creation time property for the object, along with the GTT caching level. For now we don't expose any new uAPI for this, instead on DG1 this is all implicit, although this largely shouldn't matter since DG1 is coherent by default(without any way of
controlling it).</p>
<p >Implicit caching rules, starting from DG1: </p><pre class="fragment">- If any of the object placements (see &amp;drm_i915_gem_create_ext_memory_regions)
  contain I915_MEMORY_CLASS_DEVICE then the object will be allocated and
  mapped as write-combined only.

- Everything else is always allocated and mapped as write-back, with the
  guarantee that everything is also coherent with the GPU.
</pre><p> Note that this is likely to change in the future again, where we might need more flexibility on future devices, so making this all explicit as part of a new &amp;<a class="el" href="structdrm__i915__gem__create__ext.html">drm_i915_gem_create_ext</a> extension is probable.</p>
<p >Side note: Part of the reason for this is that changing the at-allocation-time CPU caching attributes for the pages might be required(and is expensive) if we need to then CPU map the pages later with different caching attributes. This inconsistent caching behaviour, while supported on x86, is not universally supported on other architectures. So for simplicity we opt for setting everything at creation time, whilst also making it immutable, on discrete platforms. </p>
</div><h2 class="groupheader">Member Data Documentation</h2>
<a id="a0a339a30c01f374b40e09356067372ab" name="a0a339a30c01f374b40e09356067372ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a339a30c01f374b40e09356067372ab">&#9670;&nbsp;</a></span>caching</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__u32 drm_i915_gem_caching::caching</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Cacheing level to apply or return value</p>
<p >bits0-15 are for generic caching control (i.e. the above defined values). bits16-31 are reserved for platform-specific variations (e.g. l3$ caching on gen7). </p>

</div>
</div>
<a id="a5a3868b36e69d84c1183ecb7bb91a7c6" name="a5a3868b36e69d84c1183ecb7bb91a7c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a3868b36e69d84c1183ecb7bb91a7c6">&#9670;&nbsp;</a></span>handle</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__u32 drm_i915_gem_caching::handle</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Handle of the buffer to set/get the caching level of.</p>
<p >@handle: Handle of the buffer to set/get the caching level. </p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following files:<ul>
<li>third_party/uapi/dg1/drm/<a class="el" href="dg1_2drm_2i915__drm_8h_source.html">i915_drm.h</a></li>
<li>third_party/uapi/drm/<a class="el" href="drm_2i915__drm_8h_source.html">i915_drm.h</a></li>
<li>third_party/uapi/prelim/drm/<a class="el" href="prelim_2drm_2i915__drm_8h_source.html">i915_drm.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
