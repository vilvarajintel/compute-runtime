<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NEO: GUIDELINES</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">NEO
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">GUIDELINES </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >File to cover guidelines for NEO project.</p>
<h1><a class="anchor" id="autotoc_md34"></a>
C++ usage</h1>
<ul>
<li>use c++ style casts instead of c style casts.</li>
<li>do not use default parameters</li>
<li>prefer using over typedef</li>
<li>avoid defines for constants, use constexpr</li>
<li>prefer forward declarations in headers</li>
<li>avoid includes in headers unless absolutely necessary</li>
<li>use of exceptions in driver code needs strong justification</li>
<li>prefer static create methods returning std::unique_ptr instead of throwing from constructor</li>
</ul>
<h1><a class="anchor" id="autotoc_md35"></a>
Naming conventions</h1>
<ul>
<li>use snake_case for new files</li>
<li>use PascalCase for class, struct, enum, and namespace names</li>
<li>use camelCase for variable and function names</li>
<li>prefer verbose names for variables and functions <div class="fragment"><div class="line">bad examples : sld, elws, aws</div>
<div class="line">good examples : sourceLevelDebugger, enqueuedLocalWorkGroupSize, actualWorkGroupSize</div>
</div><!-- fragment --></li>
<li>follow givenWhenThen test naming pattern, indicate what is interesting in the test</li>
</ul>
<p >bad examples : </p><div class="fragment"><div class="line">TEST(CsrTests, initialize)</div>
<div class="line">TEST(CQTests, simple)</div>
<div class="line">TEST(CQTests, basic)</div>
<div class="line">TEST(CQTests, works)</div>
</div><!-- fragment --><p> good examples: </p><div class="fragment"><div class="line">TEST(CommandStreamReceiverTests, givenCommandStreamReceiverWhenItIsInitializedThenProperFieldsAreSet)</div>
<div class="line">TEST(CommandQueueTests, givenCommandQueueWhenEnqueueIsDoneThenTaskLevelIsModifed)</div>
<div class="line">TEST(CommandQueueTests, givenCommandQueueWithDefaultParamtersWhenEnqueueIsDoneThenTaskCountIncreases)</div>
<div class="line">TEST(CommandQueueTests, givenCommandQueueWhenEnqueueWithBlockingFlagIsSetThenDriverWaitsUntilAllCommandsAreCompleted)</div>
</div><!-- fragment --> <h1><a class="anchor" id="autotoc_md36"></a>
Testing mindset</h1>
<ul>
<li><a class="el" href="structTest.html">Test</a> behaviors instead of implementations, do not focus on adding a test per every function in the class (avoid tests for setters and getters), focus on the functionality you are adding and how it changes the driver behavior, do not bind tests to implementation.</li>
<li>Make sure that test is fast, our test suite needs to complete in seconds for efficient development pace, as a general rule test shouldn't be longer then 1ms in Debug driver.</li>
</ul>
<h1><a class="anchor" id="autotoc_md37"></a>
Coding guidelines</h1>
<ul>
<li>Favor the design of a self-explanatory code over the use of comments; if comments are needed, use double slash instead of block comments</li>
<li>HW commands and structures used in NEO must be initialized with constants defines for each Gfx Family: i.e. PIPE_CONTROL cmd = GfxFamily::cmdInitPipeControl</li>
<li>Any new HW command or structure must have its own static constant initializer added to any Gfx Family that is going to use it.</li>
<li>One-line branches use braces</li>
<li>Headers are guarded using <code>#pragma once</code></li>
<li>Do not use <code>TODO</code>s in the code</li>
<li>Use <code>UNRECOVERABLE_IF</code> and <code>DEBUG_BREAK_IF</code> instead of <code>asserts</code>:<ul>
<li>Use <code>UNRECOVERABLE_IF</code> when a failure is found and driver cannot proceed with normal execution. <code>UNRECOVERABLE_IF</code> is implemented in Release and Debug builds.</li>
<li>Use <code>DEBUG_BREAK_IF</code> when a failure can be handled gracefully by the driver and it can continue with normal execution. <code>DEBUG_BREAK_IF</code> is only implemented in Debug builds. </li>
</ul>
</li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
